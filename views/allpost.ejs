<%- include('partials/header') %>

<% const Posts = posts.filter(post => post.show === true); %>
<br>
<h1 class="w-full text-center text-3xl font-semibold mb-6">All Posts</h1>

<div class="w-full min-h-screen grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-3">

  <% Posts.forEach(post => { %>
 <div class="bg-gray-300/50 rounded-xl shadow-2xl 
 overflow-hidden transition-all duration-300 hover:shadow-xl p-2 sm:h-64 h-76">
      <!-- User info -->
      <div class="flex gap-2 items-center mb-0 relative">
        <img src="<%- post.user.imageUrl %>" alt="user" class="w-8 h-8 rounded-full">
        <span class="font-semibold"><%= post.user.username %></span>
        <p class="text-xs text-yellow-800 absolute top-0 right-0"><%= post.dateit || '' %></p>
      </div>

      <!-- Title -->
      <h1 class="text-black mb-3 mt-1 font-medium text-lg"><%= post.title %></h1>
<a href="/post/<%= post._id %>" class="
  relative bottom-3  text-black rounded hover:text-blue-400 " >পোস্ট দেখুন</a>
      <!-- Video Wrapper -->
            <div class="relative bottom-0 sm:bottom-3 overflow-hidden" style="padding-top: 56.25%"> <!-- 16:9 Aspect Ratio -->      
        
          <%- post.content %> <!-- already iframe -->
     
      </div>

    </div>
  <% }) %>

</div>

<style>
/* Make iframe fully responsive inside wrapper */
.video-wrapper iframe {
  width: 100% !important;
  height: 100% !important;
  border: 0;
  display: block;
  object-fit: contain;
}

/* Optional: adjust padding for small screens if needed */
@media (max-width: 768px) {
  .video-wrapper {
    padding-top:56.25%; /* keep 16:9 ratio on mobile */
  }
}
</style>

<%- include('partials/footer') %>
