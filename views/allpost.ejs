<%- include('partials/header') %>

<% const Posts = posts.filter(post => post.show === true); %>
<br>
<h1 class="w-full text-center text-3xl font-semibold">All Posts</h1>

<div class="w-full min-h-screen grid grid-cols-1 md:grid-cols-3 p-3 gap-4">

  <% Posts.forEach(post => { %>
    <div class="bg-blue-300 rounded-lg p-2 shadow-md relative">
      <!-- User info -->
      <div class="flex gap-2 items-center mb-2 relative">
        <img src="<%- post.user.imageUrl %>" alt="user" class="w-8 h-8 rounded-full">
        <span class="font-semibold"><%= post.user.username %></span>
        <p class="text-sm text-yellow-800 absolute top-0 right-0"><%= post.dateit || '' %></p>
      </div>

      <!-- Title -->
      <h1 class="text-white mb-2 font-medium text-lg"><%= post.title %></h1>

      <!-- Video Wrapper -->
      <div class="video-wrapper w-full max-w-md mx-auto">
        <%- post.content %>
      </div>
    </div>
  <% }) %>

</div>

<style>
/* Video wrapper for crop-free fit */
.video-wrapper {
  position: relative;
  width: 100%;
  height: auto;       /* height adjusts to video */
}

.video-wrapper iframe,
.video-wrapper video {
  width: 100%;
  height: 100%;
  display: block;
  border: 0;
  object-fit: contain; /* video fits inside div, crop-free */
}
</style>

<%- include('partials/footer') %>