<%- include('partials/header') %>



<div class="bg-gray-100 flex items-center justify-center min-h-screen">

<div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md mx-auto">
    <h1 class="w-full text-center text-4xl font-bold text-gray-800 mb-6">Create Your Account</h1>

    
<div class="flex flex-col items-center space-y-4">
    <!-- Hidden Form -->
    <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data" class="hidden">
      <input type="file" name="image" id="fileInput" accept="image/*">
    </form>

    <!-- Profile Image / Avatar -->
    <div id="avatarWrapper" class="relative cursor-pointer">
      <% if (user && user.imageUrl) { %>
        <!-- যদি আগের ছবি থাকে -->
        <img id="profileImg" src="<%= user.imageUrl %>" 
             class="w-24 h-24 rounded-full object-cover ring-2 ring-blue-500">
      <% } else { %>
        <!-- যদি ছবি না থাকে, প্রথম অক্ষর দেখাও -->
        <div id="profileImg" 
             class="w-24 h-24 flex items-center justify-center rounded-full bg-blue-500 text-white text-3xl font-bold ring-2 ring-blue-500">
          <%= user && user.username ? user.username.charAt(0).toUpperCase() : "U" %>
        </div>
      <% } %>
    </div>

    <p class="text-gray-600">Click avatar to upload new photo</p>
  </div>

  







    <form action="/update-profile" method="post" class="space-y-6">
        <div>
            <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
            <input type="text" name="username" id="username" placeholder="Enter your username"
              value="<%- user.username %>"     class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 transition duration-300">
        </div>
        
        <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
            <input type="email" name="email" id="email" placeholder="Enter your email"
                value="<%- user.email %>"    class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-purple-500 focus:border-purple-500 transition duration-300">
        </div>
 
       
        
        <button type="submit"
                class="w-full cursor-pointer py-3 mt-4 bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition duration-300 transform hover:scale-105">
            Update Now
        </button>
    </form>
</div>
</div>
<script>
    const avatar = document.getElementById("avatarWrapper");
    const fileInput = document.getElementById("fileInput");
    const uploadForm = document.getElementById("uploadForm");
    const profileImg = document.getElementById("profileImg");

    // Click করলে file chooser খুলবে
    avatar.addEventListener("click", () => {
      fileInput.click();
    });

    // File select করলে auto submit হবে
    fileInput.addEventListener("change", () => {
      if (fileInput.files.length > 0) {
        uploadForm.submit();
      }
    });
  </script>

<%- include('partials/footer') %>